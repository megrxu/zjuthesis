% Zhejiang University Undergraduate Graduation Thesis/Design Template
% Author: Zixuan Wang
% Email : zxwang42 [at] gmail.com
% Update: https://github.com/TheNetAdmin/zjuthesis/releases

\documentclass[
    StudentName = 姓名,
    StudentID   = 学号,
    AdvisorName = 指导教师,
    Grade       = 2014,   % only the year, no `级`
    Major       = 专业,
    Department  = 学院,
    Title       = 毕业论文/设计题目,
    SubmitDate  = 递交日期,
    MajorFormat = isee,
    Type        = thesis, % `thesis` or `design`
    Period      = thesis,  % `final`  or `proposal`
    BlindReview = false   % `true`   or `false`
]{config/zjuthesis}

\newcommand{\inputfinal}
{
    % Final part
    \newrefsection
    \inputpage{final/cover}
    \inputpage{final/previous}
    \inputpage{final/toc}

    \addtocontents{toc}{\protect\setcounter{tocdepth}{3}}
    \cleardoublestylepage{previous}
    \ifthenelse{\equal{\Type}{design}}
        {\part{毕业设计}}
        {\part{毕业论文（设计）}}
    \input{content/final/content}
    \input{content/final/cv}

    \inputpage{final/post}

    % Proposal part
    \newrefsection
    \addtocontents{toc}{\protect\setcounter{tocdepth}{0}}
    \cleardoublestylepage{empty}
    \ifthenelse{\equal{\Type}{design}}
        {\part{毕业设计开题报告}}
        {\part{文献综述和开题报告}}

    \inputpage{proposal/cover}
    \inputpage{proposal/previous}
    \input{content/proposal/content}
    \inputpage{proposal/post}
}

\newcommand{\inputthesis}
{
    % Final part
    \newrefsection
    \input{content/final/abstract}
    \inputpage{final/toc}

    \addtocontents{toc}{\protect\setcounter{tocdepth}{3}}
    \input{content/final/content}

    \pagestyle{empty}
    \inputpage{final/job}
}

\newcommand{\inputproposal}
{
    \inputpage{proposal/cover}
    \inputpage{proposal/previous}
    \inputpage{proposal/toc}
    \input{content/proposal/content}
    \inputpage{proposal/post}
}

\raggedbottom
\floatname{algorithm}{算法}
\setlist[enumerate]{nosep}

\begin{document}

\ifthenelse{\equal{\Period}{final}}
{
    \inputfinal{}
}
{
    \ifthenelse{\equal{\Period}{proposal}}
    {
        \inputproposal{}
    }
    {
        \inputthesis{}
    }
}

\end{document}
